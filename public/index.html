<!DOCTYPE html> 
<html> 
	<head> 
	<title>Mobile Log</title> 
	
	<meta name="viewport" content="width=device-width, initial-scale=1"> 

	<link rel="stylesheet" href="css/jquery.mobile-1.0b3pre.css"/>
        <style rel="stylesheet"  type="text/css">
           #home  div {
            text-align: center;
           }

.record-button .ui-btn-inner { 
    padding: 2em; 
    display: block; 
    height: 100%; 
    text-overflow: ellipsis; 
    overflow: hidden; 
    white-space: nowrap; 
    position: relative; 
}
footer {
   position:absolute; 
   bottom: 0; left:0;
}

        </style>
        <script type="text/javascript" src="js/jquery-1.6.2.js"></script>
        <script type="text/javascript">
          $(document).bind("mobileinit", function(){
            $.extend(  $.mobile , {
              addBackBtn: true
            });

          });
          $('#home').live("swipeleft", function(){
		var nextpage = $(this).next('div[data-role="page"]');
		// swipe using id of next page if exists
		if (nextpage.length > 0) {
			$.mobile.changePage(nextpage, 'slide');
		}
	});
	$('#log').live("swiperight", function(){
		var prevpage = $(this).prev('div[data-role="page"]');
		// swipe using id of next page if exists
		if (prevpage.length > 0) {
			$.mobile.changePage(prevpage, 'slide', true);
		}
	});

  
          function savePosition(position) {
//               var val = position.coords.latitude + ", " + position.coords.longitude;
               val = "";
               localStorage.setItem(new Date(), val);
               updateListView();            
          }
          

          $("#home").live('pagecreate', function() {
             $('.record-button').click(function(event){
          //      navigator.geolocation.getCurrentPosition(savePosition, saveTimeOnly);
                savePosition();
  

             });
             $(".clear-button").click(function() {
               localStorage.clear();
               updateListView();
             });

          });
          $("#home").live('pagebeforeshow', function() {
          
          
             updateListView();
          });
          function updateListView() {
             var log = $("ul.log");
             log.empty();
          
             for(key in localStorage) {
               log.append("<li>"+new Date(key)+"</li>");
             }
             log.listview('refresh');

          }
         
        </script>
	<script type="text/javascript"
	src="js/jquery.mobile-1.0b3pre.js"></script>
        <script type="text/javascript" src="js/jquery.mobile.iscroll.js"></script>
        </head>
        <body> 
	  <section id="home" data-role="page" data-theme="a"
                   data-fullscreen="true" data-iscroll="enable">
	    <header data-role="header" >
              <h1>Mobile Log</h1>
              <a href="index.html"  class="ui-btn-right clear-button" >Clear</a> 
            </header> 
	    <div data-role="content"> 
              <div class="record-button">
                <button  >Tap to record</button> 
              </div>
              <ul class="log" data-role="listview" data-inset="true">
              </ul>
            </div>
            <div class="copyright" data-role="footer">
	      <p>Copyright (c) 2011 Kurt Harriger. All Rights Reserved.</p>
	    <p> 
            </div>
	  </section>
	  <section id="log" data-role="page">
	    <header data-role="header">
              <h1>Mobile Log - View Log</h1>
              <a data-rel="back" href="#home">Home</a>
            </header> 
	    <div data-role="content"> 
	      <p>Log page!</p> 
            </div> 

	  </section>

        </body>
</html>
